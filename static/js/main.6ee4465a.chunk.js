(this["webpackJsonpmello-webapp"]=this["webpackJsonpmello-webapp"]||[]).push([[0],{10:function(e,t,n){e.exports={chat:"Chat_chat__2u7Jk",chatDialog:"Chat_chatDialog__28R7F",messageDate:"Chat_messageDate__2tW76",messageWrapper:"Chat_messageWrapper__3FwTq",system:"Chat_system__2E5I6",messageInner:"Chat_messageInner__21H30",message:"Chat_message__3liDM",chatInputWrapper:"Chat_chatInputWrapper__flLAS",chatInput:"Chat_chatInput__3DKoW",chatInputBtn:"Chat_chatInputBtn__1OfIq",disabled:"Chat_disabled__tPetR"}},17:function(e,t,n){e.exports={requestPreview:"RequestPreview_requestPreview__2IS_h",content:"RequestPreview_content__3T-9t",companies:"RequestPreview_companies__2ZCnj",success:"RequestPreview_success__4955J",buttons:"RequestPreview_buttons__32SVC"}},18:function(e,t,n){e.exports={button:"Button_button__2yEWV",fullWidth:"Button_fullWidth__3hknv",small:"Button_small__2zoRr",disabled:"Button_disabled__2S9WB",outlined:"Button_outlined__1rgp3",rounded:"Button_rounded__sM0i2",secondary:"Button_secondary__sQ3Y-"}},20:function(e,t,n){e.exports={inputWrapper:"Input_inputWrapper__1cyZ-",input:"Input_input__Ds14m",rounded:"Input_rounded__3mTpo"}},21:function(e,t,n){e.exports={login:"Login_login__2-oiK",loginInner:"Login_loginInner__3iaN5",error:"Login_error__1KjdW"}},22:function(e,t,n){e.exports={header:"Header_header__1qtII",noTitle:"Header_noTitle__384yo",link:"Header_link__3Di1v"}},27:function(e,t,n){e.exports={layout:"Layout_layout__1kIUs",outerPage:"Layout_outerPage__osTRb"}},28:function(e,t,n){e.exports={menu:"Menu_menu__1ejUb",loginInner:"Menu_loginInner__1sqjD"}},29:function(e,t,n){e.exports={selectWrapper:"Select_selectWrapper__2b-lm",select:"Select_select__2bcEd"}},30:function(e,t,n){e.exports={icon:"ArrowTopIcon_icon__27amD"}},41:function(e,t,n){e.exports={loader:"Loader_loader__3L0H_","lds-dual-ring":"Loader_lds-dual-ring__3wIeg"}},45:function(e,t,n){e.exports={selectWrapper:"Conversations_selectWrapper__2t6su"}},51:function(e,t,n){},52:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(40),c=n.n(s),o=(n(51),n(52),n(16)),i=n(6),u="/",l="/login",d="/maintenance-request",j="/request-preview",b="/conversations",p=n(3),m=n(4),h=n(20),v=n.n(h),f=n(2),O=n(0),g=function(e){var t=e.name,n=e.value,a=e.label,r=e.onChange,s=e.rounded,c=void 0!==s&&s,o=e.type,i=void 0===o?"text":o,u=e.className,l=void 0===u?"":u,d=e.min,j=void 0===d?0:d,b=e.max,h=void 0===b?20:b,g=e.multiline,x=e.required,_={};return"file"===i&&(_.accept="image/*"),Object(O.jsxs)("div",{className:Object(f.a)(v.a.inputWrapper,Object(m.a)({},v.a.rounded,c),l),children:[Object(O.jsx)("label",{htmlFor:"",children:a}),g?Object(O.jsx)("textarea",{required:x,rows:5,name:t,value:n,onChange:r,className:Object(f.a)(v.a.input)}):Object(O.jsx)("input",Object(p.a)(Object(p.a)({required:x},_),{},{min:j,max:h,type:i,name:t,value:n,onChange:r,className:Object(f.a)(v.a.input)}))]})},x=n(21),_=n.n(x),y=function(e){var t=e.variant,n=void 0===t?"h1":t,a=e.children,r=e.className,s=void 0===r?"":r,c=n;return Object(O.jsx)(c,{className:s,children:a})},C=n(18),w=n.n(C),N=n(41),I=n.n(N),k=function(e){var t=e.size,n=void 0===t?24:t;return Object(O.jsx)("div",{className:I.a.loader,style:{minWidth:n,minHeight:n}})},S=function(e){var t,n=e.label,a=e.linkTo,r=void 0===a?"":a,s=e.color,c=void 0===s?"primary":s,i=e.rounded,u=void 0!==i&&i,l=e.outlined,d=void 0!==l&&l,j=e.onClick,b=e.className,h=void 0===b?"":b,v=e.small,g=void 0!==v&&v,x=e.fullWidth,_=void 0===x||x,y=e.loading,C=e.disabled,N=void 0!==C&&C,I={};j&&(I.onClick=j),r&&(I.to=r);var S=r?o.b:"button";return Object(O.jsx)(S,Object(p.a)(Object(p.a)({disabled:N},I),{},{className:Object(f.a)(w.a.button,h,(t={},Object(m.a)(t,w.a.rounded,u),Object(m.a)(t,w.a.outlined,d),Object(m.a)(t,w.a.small,g),Object(m.a)(t,w.a.fullWidth,_),Object(m.a)(t,w.a.secondary,"secondary"===c),Object(m.a)(t,w.a.disabled,N),t)),children:Object(O.jsxs)("span",{className:"flexCenter",children:[y&&Object(O.jsx)(k,{}),n]})}))},q=n(5),T=n.n(q),W=n(9),D=n(8),M=n(44),R="accessToken",B="refreshToken",P=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}},L=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(a){console.log(a)}},A=function(e){localStorage.removeItem(e)},E=n.n(M).a.create({baseURL:"https://beta.mellobee.com/api"});E.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(P("accessToken")),e}));var H=null;E.interceptors.response.use((function(e){return e}),function(){var e=Object(W.a)(T.a.mark((function e(t){var n,a,r,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,403!==t.response.status&&401!==t.response.status||n._retry){e.next=21;break}if(n._retry=!0,H){e.next=20;break}return a=P(B),e.prev=5,H=!0,e.next=9,Y.refreshToken(a);case 9:s=e.sent,H=null,(null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.access)&&(L(R,s.data.access),E.defaults.headers.common.Authorization="Bearer "+s.data.access,"/token/verify/"===n.url&&(n.data=JSON.stringify({token:s.data.access}))),e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(5),console.log(e.t0),A(R),A(B),e.abrupt("return",window.location.href=l);case 20:return e.abrupt("return",E(n));case 21:return e.abrupt("return",Promise.reject(t));case 22:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}());var z="/token/",F="/logout/",J="/token/verify/",U="/token/refresh/",Y={login:function(e){return E({method:"post",headers:{"Content-Type":"application/json"},withCredentials:!0,url:z,data:e})},logout:function(e){return E({method:"post",headers:{"Content-Type":"application/json"},withCredentials:!0,url:F,data:{refresh_token:e}})},verifyToken:function(e){return E({method:"post",headers:{"Content-Type":"application/json"},withCredentials:!0,url:J,data:{token:e}})},refreshToken:function(e){return E({method:"post",headers:{"Content-Type":"application/json"},withCredentials:!0,url:U,data:{refresh:e}})}},K=function(){var e=Object(i.g)(),t=Object(a.useState)({email:"",password:""}),n=Object(D.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(!1),o=Object(D.a)(c,2),d=o[0],j=o[1],b=Object(a.useState)(!1),h=Object(D.a)(b,2),v=h[0],f=h[1];return{loading:v,credentials:r,error:d,onCredentialsChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},Object(m.a)({},e.target.name,e.target.value)))},onLogin:function(){var t=Object(W.a)(T.a.mark((function t(n){var a,s,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,d&&j(!1),f(!0),t.next=6,Y.login(r);case 6:(null===(c=t.sent)||void 0===c||null===(a=c.data)||void 0===a?void 0:a.access)&&(null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.refresh)&&(L(R,c.data.access),L(B,c.data.refresh),e.push(u)),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),j(!0),f(!1);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),onLogout:function(){var t=Object(W.a)(T.a.mark((function t(){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=P(B),t.prev=1,t.next=4,Y.logout(n);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.prev=8,A(R),e.push(l),t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[1,6,8,12]])})));return function(){return t.apply(this,arguments)}}()}},V=function(){var e=K(),t=e.credentials,n=e.loading,a=e.error,r=e.onCredentialsChange,s=e.onLogin,c=t.email,o=t.password;return Object(O.jsx)("div",{className:Object(f.a)(_.a.login,"flexCenter"),children:Object(O.jsxs)("form",{className:_.a.loginInner,onSubmit:s,children:[Object(O.jsx)(y,{variant:"h3",children:"Welcome!"}),Object(O.jsx)(y,{className:"mb-3",children:"Sign In"}),Object(O.jsx)(g,{rounded:!0,onChange:r,value:c,name:"email",type:"email",label:"E-Mail or Username",className:"mb-3"}),Object(O.jsx)(g,{rounded:!0,onChange:r,value:o,name:"password",label:"Password",type:"password",className:"mb-3"}),a&&Object(O.jsx)("div",{className:Object(f.a)(_.a.error,"mb-1"),children:"Wrong username or password"}),Object(O.jsx)(S,{label:"Log In",rounded:!0,loading:n})]})})},Z=function(){return Object(O.jsx)(V,{})},Q=n(46),G=n(27),X=n.n(G),$=function(e){var t=e.children,n=Object(i.h)().pathname,r=n===u||n===l;return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(O.jsx)("div",{children:Object(O.jsx)("main",{className:Object(f.a)(X.a.layout,Object(m.a)({},X.a.outerPage,r)),children:t})})},ee=function(e){var t=e.component,n=(e.isAuthProtected,Object(Q.a)(e,["component","isAuthProtected"])),a=n.path,r=P(R),s=a===l;return Object(O.jsx)(i.b,Object(p.a)(Object(p.a)({},n),{},{render:function(e){return r||s?r&&s?Object(O.jsx)(i.a,{to:{pathname:u,state:{from:e.location}}}):Object(O.jsx)($,{children:Object(O.jsx)(t,Object(p.a)(Object(p.a)({},n),e))}):Object(O.jsx)(i.a,{to:{pathname:l,state:{from:e.location}}})}}))},te=n(28),ne=n.n(te),ae=function(){var e=K().onLogout;return Object(O.jsx)("div",{className:Object(f.a)(ne.a.menu,"flexCenter"),children:Object(O.jsxs)("div",{className:ne.a.loginInner,children:[Object(O.jsxs)(y,{variant:"h3",children:["Welcome ","Lisa","!"]}),Object(O.jsx)(y,{className:"mb-3",children:"Menu"}),Object(O.jsx)(S,{linkTo:d,label:"Submit A Request",rounded:!0,className:"mb-3"}),Object(O.jsx)(S,{linkTo:b,label:"View Conversations",rounded:!0,className:"mb-3"}),Object(O.jsx)(S,{label:"Log Out",onClick:e,rounded:!0,outlined:!0})]})})},re=function(){return Object(O.jsx)(ae,{})},se=n(22),ce=n.n(se),oe=function(e){var t=e.title,n=e.hasBackBtn,a=void 0===n||n;return Object(O.jsxs)("header",{className:Object(f.a)("flexCenter",ce.a.header,"mb-3",Object(m.a)({},ce.a.noTitle,!t)),children:[t&&Object(O.jsx)(y,{variant:"h2",children:t}),a&&Object(O.jsx)(o.b,{to:u,className:ce.a.link,children:"Return to Home"})]})},ie="/project/",ue="/project/",le=function(e){return"/project/".concat(e,"/")},de=function(e,t){return"/project/".concat(e,"/company/").concat(t,"/")},je=function(e,t){return"/project/".concat(e,"/company/").concat(t,"/")},be=function(){return E({method:"get",url:ie})},pe=function(e){return E({method:"post",headers:{"Content-Type":"multipart/form-data"},withCredentials:!0,url:ue,data:e})},me=function(e){return E({method:"patch",headers:{"Content-Type":"application/json"},withCredentials:!0,url:le(e),data:{send_confirmed:!0}})},he=function(e,t){return E({method:"get",url:de(e,t)})},ve=function(e,t,n){return E({method:"post",headers:{"Content-Type":"application/json"},withCredentials:!0,url:je(e,t),data:{message:n,project_id:e,company_id:t}})},fe=function(e){switch(e){case"jobType":return"job_type";case"numRequests":return"num_requests";case"zipCode":return"zip_code";default:return e}},Oe=function(){var e=function(){var e=Object(i.g)(),t=Object(a.useState)({jobType:"",numRequests:"1",address:"",city:"",zipCode:"",message:""}),n=Object(D.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(null),o=Object(D.a)(c,2),u=o[0],l=o[1];return{onSubmit:function(){var t=Object(W.a)(T.a.mark((function t(n){var a,s,c,o;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=new FormData,Object.keys(r).map((function(e){a.append(fe(e),r[e])})),u&&a.append("image",u),t.prev=4,t.next=7,pe(a);case 7:o=t.sent,e.push({pathname:j,state:{requestData:Object(p.a)(Object(p.a)({},r),{},{companies:null===(s=o.data)||void 0===s?void 0:s.companies}),projectId:null===(c=o.data)||void 0===c?void 0:c.id}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}(),onInputChange:function(e){if("file"===e.target.type&&e.target.files.length)return l(e.target.files[0]);s(Object(p.a)(Object(p.a)({},r),{},Object(m.a)({},e.target.name,e.target.value)))},requestData:r}}(),t=e.requestData,n=e.onSubmit,r=e.onInputChange,s=t.jobType,c=t.numRequests,o=t.address,u=t.city,l=t.zipCode,d=t.message,b=t.photo;return Object(O.jsxs)("div",{children:[Object(O.jsx)(oe,{title:"Maintenance Request"}),Object(O.jsxs)("form",{onSubmit:n,children:[Object(O.jsx)(g,{required:!0,onChange:r,value:s,name:"jobType",label:"Job Type (ex: handyman, plumber, electrician, AC repair, etc...)",className:"mb-1"}),Object(O.jsx)(g,{max:"50",min:"1",type:"number",onChange:r,value:c,name:"numRequests",label:"# of Requests (suggested 20, max 50)",className:"mb-1"}),Object(O.jsx)(g,{required:!0,onChange:r,value:o,name:"address",label:"Address",className:"mb-1"}),Object(O.jsx)(g,{required:!0,onChange:r,value:u,name:"city",label:"City",className:"mb-1"}),Object(O.jsx)(g,{required:!0,onChange:r,value:l,name:"zipCode",label:"Zip Code",className:"mb-1"}),Object(O.jsx)(g,{required:!0,multiline:!0,onChange:r,value:d,name:"message",label:"Describe your issue in as much detail as possible:",className:"mb-1"}),Object(O.jsx)(g,{onChange:r,value:b,name:"photo",type:"file",label:"Upload a photo of the issue (Optional)",className:"mb-3"}),Object(O.jsx)(S,{label:"Send Message",className:"mb-3",small:!0,fullWidth:!1})]})]})},ge=function(){return Object(O.jsx)(Oe,{})},xe=n(17),_e=n.n(xe),ye=function(e){var t=e.vendorName,n=e.description,a=e.address,r=e.city;return Object(O.jsxs)("div",{className:Object(f.a)(_e.a.content,"mb-3"),children:[Object(O.jsxs)("p",{children:["Hello, is this ",t,"? I got your info off Yelp. ",n," I am located at ",a," in ",r,"."]}),Object(O.jsx)("p",{children:"How much will this job cost, or if an in-person estimate is needed, how much is the estimate visit? When is your next availability?"})]})},Ce=function(e){var t=e.companies;return Object(O.jsxs)("div",{className:Object(f.a)(_e.a.companies,"mb-3"),children:[Object(O.jsx)("p",{className:"mb-2",children:"Your request will be sent to the following companies:"}),Object(O.jsx)("div",{children:(t||[]).map((function(e){return e.name})).join(", ")})]})},we=function(e){var t=e.disabled,n=e.conversationCreated,a=e.onSubmit,r=e.onCancel;return Object(O.jsxs)("div",{children:[n?Object(O.jsx)("h4",{className:Object(f.a)("mb-3 textCenter",_e.a.success),children:"Your message has been sent successfully."}):Object(O.jsx)("h4",{className:"mb-3 textCenter",children:"Are you ready to send your request?"}),Object(O.jsxs)("div",{className:Object(f.a)("flexCenter",_e.a.buttons),children:[Object(O.jsx)(S,{onClick:r,label:n?"Home":"Cancel",color:"secondary",fullWidth:!1,small:!0}),Object(O.jsx)(S,{disabled:t,onClick:a,label:n?"See Chat":"Send",fullWidth:!1,small:!0})]})]})},Ne=function(){var e=function(){var e,t=Object(i.h)(),n=Object(i.g)(),r=Object(a.useState)(!1),s=Object(D.a)(r,2),c=s[0],o=s[1],l=function(){var e=Object(W.a)(T.a.mark((function e(){var a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(a=t.state)||void 0===a?void 0:a.projectId)){e.next=12;break}if(!c){e.next=3;break}return e.abrupt("return",n.push(b));case 3:return e.prev=3,e.next=6,me(null===(r=t.state)||void 0===r?void 0:r.projectId);case 6:o(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return{requestData:(null===(e=t.state)||void 0===e?void 0:e.requestData)||null,conversationCreated:c,onSubmit:l,onCancel:function(){return n.push(u)}}}(),t=e.requestData,n=e.conversationCreated,r=e.onSubmit,s=e.onCancel,c=Object(i.g)();if(Object(a.useEffect)((function(){t||c.push(u)}),[]),!t)return null;var o=t.message,l=t.address,d=t.city,j=t.companies,p=j.length>0?j[0].name:"";return Object(O.jsxs)("div",{children:[Object(O.jsx)(oe,{title:"Your Request",hasBackBtn:!1}),Object(O.jsxs)("div",{className:_e.a.requestPreview,children:[Object(O.jsx)(ye,{vendorName:p,address:l,city:d,description:o}),Object(O.jsx)(Ce,{companies:j})]}),Object(O.jsx)(we,{onSubmit:r,onCancel:s,disabled:!j.length,conversationCreated:n})]})},Ie=function(){return Object(O.jsx)(Ne,{})},ke=n(29),Se=n.n(ke),qe=function(e){var t=e.name,n=e.value,a=e.label,r=e.onChange,s=e.className,c=void 0===s?"":s,o=e.options;return Object(O.jsxs)("div",{className:Object(f.a)(Se.a.selectWrapper,c),children:[Object(O.jsx)("label",{htmlFor:"",children:a}),Object(O.jsx)("select",{name:t,value:n,onChange:r,className:Object(f.a)(Se.a.select),children:(o||[]).map((function(e,t){var n=e.id,a=e.name;return Object(O.jsx)("option",{value:n,children:a||"Project ".concat(t+1)},"".concat(a).concat(t))}))})]})},Te=n(10),We=n.n(Te),De=n(13),Me=n.n(De),Re=Object(a.memo)((function(e){var t=e.text,n=e.created,a=e.author;return Object(O.jsx)("div",{className:Object(f.a)(We.a.messageWrapper,"mb-1",Object(m.a)({},We.a.system,"system"===a)),children:Object(O.jsxs)("div",{className:Object(f.a)(We.a.message),children:[Object(O.jsx)("div",{className:We.a.messageDate,children:n}),Object(O.jsx)("div",{className:Object(f.a)(We.a.messageInner,"mb-1"),children:t})]})})}));Re.propTypes={text:Me.a.string.isRequired,created:Me.a.string,author:Me.a.string};var Be=Object(a.memo)((function(e){var t=e.messages;return Object(O.jsx)("div",{className:We.a.chatDialog,children:(t||[]).map((function(e){var t=e.body,n=e.index,a=e.created,r=e.author;return Object(O.jsx)(Re,{text:t,created:a,author:r},"message".concat(n))}))})}));Be.propTypes={messages:Me.a.array.isRequired};var Pe=n(30),Le=n.n(Pe),Ae=function(){return Object(O.jsxs)("svg",{enableBackground:"new 0 0 64 64",version:"1.1",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[Object(O.jsx)("polyline",{className:Le.a.icon,points:"48 32.2 32 16.2 16 32.2"}),Object(O.jsx)("line",{className:Le.a.icon,x1:"32",x2:"32",y1:"16.2",y2:"47.8"})]})},Ee=Object(a.memo)((function(e){var t=e.inputMessage,n=e.onChange,a=e.onMessageSend;return Object(O.jsxs)("form",{className:We.a.chatInputWrapper,onSubmit:a,children:[Object(O.jsx)("textarea",{required:!0,placeholder:"Type your message here...",rows:2,name:"message",value:t,onChange:n,className:We.a.chatInput}),Object(O.jsxs)("button",{className:Object(f.a)(We.a.chatInputBtn,Object(m.a)({},We.a.disabled,!t)),disabled:!t,children:[Object(O.jsx)(Ae,{}),Object(O.jsx)("span",{children:"Send"})]})]})}));Ee.propTypes={inputMessage:Me.a.string.isRequired};var He=function(e){var t=e.messages,n=e.inputMessage,a=e.onChange,r=e.onMessageSend;return Object(O.jsxs)("div",{className:We.a.chat,children:[Object(O.jsx)(Be,{messages:t}),Object(O.jsx)(Ee,{inputMessage:n,onChange:a,onMessageSend:r})]})},ze=n(45),Fe=n.n(ze),Je=function(){var e=Object(a.useState)({projectId:"",companyId:"",message:""}),t=Object(D.a)(e,2),n=t[0],r=t[1],s=n.projectId,c=n.companyId,o=n.message,i=function(){var e=Object(a.useState)([]),t=Object(D.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(W.a)(T.a.mark((function e(){var t,n,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be();case 3:(null===(n=e.sent)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.results)&&r(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.results),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),{projects:n}}().projects,u=function(e,t){var n=Object(a.useState)([]),r=Object(D.a)(n,2),s=r[0],c=r[1];return Object(a.useEffect)((function(){if(t&&e.length>0){var n=e.filter((function(e){return e.id===+t}));n.length&&n[0].companies.length>0&&c(n[0].companies)}}),[e,t]),{companies:s}}(i,s).companies,l=function(e,t,n){var r=Object(a.useState)([]),s=Object(D.a)(r,2),c=s[0],o=s[1],i=function(){var a=Object(W.a)(T.a.mark((function a(){var r;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(n.filter((function(n){return n.id===+e&&n.companies.some((function(e){return e.id===+t}))})).length>0)){a.next=7;break}return a.next=5,he(e,t);case 5:(null===(r=a.sent)||void 0===r?void 0:r.data)&&o(null===r||void 0===r?void 0:r.data);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(){return a.apply(this,arguments)}}();return Object(a.useEffect)((function(){e&&t&&i()}),[e,t]),{messages:c,fetchMessages:i}}(s,c,i),d=l.messages,j=l.fetchMessages;Object(a.useEffect)((function(){!s&&i.length>0&&i[0].companies.length>0&&r(Object(p.a)(Object(p.a)({},n),{},{projectId:i[0].id,companyId:i[0].companies[0].id}))}),[i,u]),Object(a.useEffect)((function(){var e=i.filter((function(e){return e.id===+s}));e.length&&r(Object(p.a)(Object(p.a)({},n),{},{projectId:e[0].id,companyId:e[0].companies[0].id}))}),[n.projectId]);return{data:n,onChange:function(e){return r(Object(p.a)(Object(p.a)({},n),{},Object(m.a)({},e.target.name,e.target.value)))},onMessageSend:function(){var e=Object(W.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ve(s,c,o);case 4:return e.next=6,j();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),projects:i,companies:u,messages:d}},Ue=function(e){return e.map((function(e){return{name:"".concat(e.job_type," ").concat(e.created?(t=e.created,t?t.split("T")[0].split("-").reverse().join("/"):""):""),id:e.id};var t}))},Ye=function(){var e=Je(),t=e.data,n=e.companies,a=e.projects,r=e.onChange,s=e.onMessageSend,c=e.messages,o=t.projectId,i=t.companyId,u=t.message;return Object(O.jsxs)("div",{children:[Object(O.jsx)(oe,{}),Object(O.jsxs)("div",{className:Fe.a.selectWrapper,children:[Object(O.jsx)(qe,{className:"mb-1",label:"Project",options:Ue(a),onChange:r,name:"projectId",value:o}),Object(O.jsx)(qe,{className:"mb-1",label:"Company",options:n,onChange:r,name:"companyId",value:i})]}),Object(O.jsx)(He,{messages:c,inputMessage:u,onChange:r,onMessageSend:s})]})},Ke=function(){return Object(O.jsx)(Ye,{})};var Ve=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.d,{children:[Object(O.jsx)(ee,{path:u,component:re,exact:!0}),Object(O.jsx)(ee,{path:l,component:Z,isAuthProtected:!1}),Object(O.jsx)(ee,{path:d,component:ge}),Object(O.jsx)(ee,{path:j,component:Ie}),Object(O.jsx)(ee,{path:b,component:Ke})]})})})},Ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(Ve,{})}),document.getElementById("root")),Ze()}},[[79,1,2]]]);
//# sourceMappingURL=main.6ee4465a.chunk.js.map